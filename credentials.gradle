Properties getPropertiesFile(String fileLocation) {

    Properties props = new Properties()
    File file = new File(fileLocation)

    if (!file.canRead()) {
        throw new GradleException('Could not read properties file: ' + fileLocation)
    }

    props.load(file.newDataInputStream())
    return props
}

String getCredentialsValue(String file, String name) {
    return getPropertiesFile("${projectDir.absolutePath}/../${file}.credentials").getProperty(name);
}

String getDatabaseUsername() {
    return getCredentialsValue('database', 'DB_USER')
}

String getDatabasePassword() {
    return getCredentialsValue('database', 'DB_PASSWORD')
}

String getDatabaseConnectionString() {
    return getCredentialsValue('database', 'DB_CONNECTION_STRING')
}

String getGithubOAuthToken() {
    return getCredentialsValue('github', 'GITHUB_OAUTH_TOKEN')
}

String getAmazonAccessKey() {
    return getCredentialsValue('amazon', 'AWS_ACCESS_KEY_ID')
}

String getAmazonSecretKey() {
    return getCredentialsValue('amazon', 'AWS_SECRET_ACCESS_KEY')
}

ext {
    getDatabaseUsername = this.&getDatabaseUsername
    getDatabasePassword = this.&getDatabasePassword
    getDatabaseConnectionString = this.&getDatabaseConnectionString
    getGithubOAuthToken = this.&getGithubOAuthToken
    getAmazonAccessKey = this.&getAmazonAccessKey
    getAmazonSecretKey = this.&getAmazonSecretKey
}
